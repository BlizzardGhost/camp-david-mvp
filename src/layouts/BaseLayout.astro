---
import '../styles/globals.css';
import Analytics from '@vercel/analytics/astro'

const {
  title = 'Camp David â€“ Bantam Lake, CT',
  description = 'Modern & delightful cottages facing Bantam Lake.',
  canonical,
} = Astro.props;

const SITE = (Astro.site && Astro.site.href) || 'https://camp-david-mvp.vercel.app';

// Use the exact OG image you provided (absolute URL)
const OG_IMAGE = 'https://www.campdavidct.com/wp-content/uploads/2022/06/Camp-David-Bantam-Lake-Morris-CT.jpg';

const DEV = import.meta.env.DEV;
---
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>{title}</title>
    <meta name="description" content={description} />
    {canonical && <link rel="canonical" href={canonical} />}

    <!-- Open Graph -->
    <meta property="og:type" content="website" />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:url" content={canonical ?? SITE} />
    <meta property="og:image" content={OG_IMAGE} />
    <meta property="og:image:secure_url" content={OG_IMAGE} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={OG_IMAGE} />

    <link rel="icon" href="/icon.svg" type="image/svg+xml" />
    <link rel="icon" href="/favicon.svg" type="image/svg+xml" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
      href="https://fonts.googleapis.com/css2?family=Hind:wght@400;700&family=Roboto:wght@500;600&family=Roboto+Slab:wght@400&family=Yeseva+One&display=swap"
      rel="stylesheet"
    >

    <style>
      :root { --cd-primary:#2A2A2A; --cd-secondary:#A6A6A6; --cd-text:#8B8B8B; --cd-accent:#B10F2E; }
      body { font-family:"Hind",system-ui,sans-serif; line-height:1.5; }
      h1,h2 { font-family:"Yeseva One",serif; letter-spacing:-0.01em; line-height:1.1; }
      h3,h4 { font-family:"Hind",system-ui,sans-serif; letter-spacing:0.04em; }
      .ui-font { font-family:"Roboto",system-ui,sans-serif; font-weight:600; }
    </style>

    <!-- Pannellum -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.css">
    <script src="https://cdn.jsdelivr.net/npm/pannellum@2.5.6/build/pannellum.js"></script>
  </head>
  <body class="min-h-screen bg-white text-neutral-800 font-sans">
    <a class="sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 p-2 bg-white" href="#main">Skip to content</a>

    <slot name="header" />
    <main id="main"><slot /></main>
    <slot name="footer" />

    <!-- One (and only) opener for any [data-open-modal="id"] -->
    <script is:inline>
      document.addEventListener('click', (e) => {
        const btn = e.target && e.target.closest ? e.target.closest('[data-open-modal]') : null;
        if (!btn) return;
        const id = btn.getAttribute('data-open-modal');
        if (${JSON.stringify(DEV)}) console.debug('[open-modal click]', id);
        window.dispatchEvent(new CustomEvent('cd:open-cottage', { detail: id }));
      });
    </script>

    <!-- Iconify -->
    <script src="https://code.iconify.design/iconify-icon/2.1.0/iconify-icon.min.js"></script>

    <Analytics/>
  </body>
</html>